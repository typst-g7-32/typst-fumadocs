---
title: "Reference"
description: "Documentation for the `ref` function."
---

import { TypeTable } from 'fumadocs-ui/components/type-table';
import { TypstPreview } from '@/components/typst/preview';

A reference to a label or bibliography.

Takes a label and cross-references it. There are two kind of references, determined by its [`form{:typst}`](/docs/reference/model/ref/#parameters-form): `"normal"{:typst}` and `"page"{:typst}`.

The default, a `"normal"{:typst}` reference, produces a textual reference to a label. For example, a reference to a heading will yield an appropriate string such as "Section 1" for a reference to the first heading. The word "Section" depends on the [`lang{:typst}`](/docs/reference/text/text/#parameters-lang) setting and is localized accordingly. The references are also links to the respective element. Reference syntax can also be used to [cite](/docs/reference/model/cite/) from a bibliography.

As the default form requires a supplement and numbering, the label must be attached to a _referenceable element_. Referenceable elements include [headings](/docs/reference/model/heading/), [figures](/docs/reference/model/figure/), [equations](/docs/reference/math/equation/), and [footnotes](/docs/reference/model/footnote/). To create a custom referenceable element like a theorem, you can create a figure of a custom [`kind{:typst}`](/docs/reference/model/figure/#parameters-kind) and write a show rule for it. In the future, there might be a more direct way to define a custom referenceable element.

If you just want to link to a labelled element and not get an automatic textual reference, consider using the [`link{:typst}`](/docs/reference/model/link/) function instead.

A `"page"{:typst}` reference produces a page reference to a label, displaying the page number at its location. You can use the [page's supplement](/docs/reference/layout/page/#parameters-supplement) to modify the text before the page number. Unlike a `"normal"{:typst}` reference, the label can be attached to any element.

## Example

<TypstPreview
  code={`
  #set page(numbering: "1")
  #set heading(numbering: "1.")
  #set math.equation(numbering: "(1)")

  = Introduction <intro>
  Recent developments in
  typesetting software have
  rekindled hope in previously
  frustrated researchers. @distress
  As shown in @results (see
  #ref(<results>, form: "page")),
  we ...

  = Results <results>
  We discuss our approach in
  comparison with others.

  == Performance <perf>
  @slow demonstrates what slow
  software looks like.
  $ T(n) = O(2^n) $ <slow>

  #bibliography("works.bib")
`}
  image='/typst-fumadocs/assets/a792745ccec945a90763138d4e45762f'
  alt='Preview'
  editable={false}
/>

## Syntax

This function also has dedicated syntax: A `"normal"{:typst}` reference to a label can be created by typing an `@{:typst}` followed by the name of the label (e.g. `= Introduction <intro>{:typst}` can be referenced by typing `@intro{:typst}`).

To customize the supplement, add content in square brackets after the reference: `@intro[Chapter]{:typst}`.

## Customization

When you only ever need to reference pages of a figure/table/heading/etc. in a document, the default `form{:typst}` field value can be changed to `"page"{:typst}` with a set rule. If you prefer a short "p." supplement over "page", the [`page.supplement{:typst}`](/docs/reference/layout/page/#parameters-supplement) field can be used for changing this:

<TypstPreview
  code={`
  #set page(
    numbering: "1",
    supplement: "p.",
  )
  #set ref(form: "page")

  #figure(
    stack(
      dir: ltr,
      spacing: 1em,
      circle(),
      square(),
    ),
    caption: [Shapes],
  ) <shapes>

  #pagebreak()

  See @shapes for examples
  of different shapes.
`}
  image='/typst-fumadocs/assets/809e5dd8fac922ad14ad84035d3de989-0'
  alt='Preview page 1'
  editable={true}
/>

If you write a show rule for references, you can access the referenced element through the `element{:typst}` field of the reference. The `element{:typst}` may be `none{:typst}` even if it exists if Typst hasn't discovered it yet, so you always need to handle that case in your code.

<TypstPreview
  code={`
  #set heading(numbering: "1.")
  #set math.equation(numbering: "(1)")

  #show ref: it => {
    let eq = math.equation
    let el = it.element
    // Skip all other references.
    if el == none or el.func() != eq { return it }
    // Override equation references.
    link(el.location(), counter(eq).display(at: el.location()))
  }

  = Beginnings <beginning>
  In @beginning we prove @pythagoras.
  $ a^2 + b^2 = c^2 $ <pythagoras>
`}
  image='/typst-fumadocs/assets/c4444a637c3c784f15880772001ccd9b'
  alt='Preview'
  editable={true}
/>

```typst
#ref(
  target,
  supplement: none | auto | content | function,
  form: str
) -> content
```
## Parameters

<TypeTable
  type={{
    'target': {
      'description': 'The target label that should be referenced.  Can be a label that is defined in the document or, if the [`form{:typst}`](/docs/reference/model/ref/#parameters-form) is set to `"normal"{:typst}`, an entry from the [`bibliography{:typst}`](/docs/reference/model/bibliography/).',
      'type': 'label',
      'default': 'None'
    },
    'supplement': {
      'description': 'A supplement for the reference.  If the [`form{:typst}`](/docs/reference/model/ref/#parameters-form) is set to `"normal"{:typst}`:  - For references to headings or figures, this is added before the referenced number. - For citations, this can be used to add a page number.  If the [`form{:typst}`](/docs/reference/model/ref/#parameters-form) is set to `"page"{:typst}`, then this is added before the page number of the label referenced.  If a function is specified, it is passed the referenced element and should return content.  <TypstPreview   code={`   #set heading(numbering: "1.")   #show ref.where(     form: "normal"   ): set ref(supplement: it => {     if it.func() == heading {       "Chapter"     } else {       "Thing"     }   })    = Introduction <intro>   In @intro, we see how to turn   Sections into Chapters. And   in @intro[Part], it is done   manually. `}   image=\'/typst-fumadocs/assets/aa86f60f6632f6ef7a93b80a5a97c7d1\'   alt=\'Preview\'   editable={true} />',
      'type': 'none | auto | content | function',
      'default': '<code><span class="typ-key">auto</span></code>'
    },
    'form': {
      'description': 'The kind of reference to produce.  <TypstPreview   code={`   #set page(numbering: "1")    Here <here> we are on   #ref(<here>, form: "page"). `}   image=\'/typst-fumadocs/assets/7c0b8deae09773dbb50f5ed89759c240\'   alt=\'Preview\'   editable={true} />',
      'type': 'str',
      'default': '<code><span class="typ-str">&quot;normal&quot;</span></code>'
    }
  }}
/>


